---
import { ScheduleGrid, adaptScheduleDataToGrid } from '@/features/schedule'
import { arc2025Day1ScheduleData } from '../data'
import type { ScheduleTrack } from '@/features/schedule'
import type { LayoutEvent } from '@/features/schedule'
import type { Arc2025StagePayload, Arc2025EventPayload } from '../types'
import type { UIHeaderItem, UIColumnItem } from '@/features/schedule'

const mapTrack = (track: ScheduleTrack<Arc2025StagePayload>): UIHeaderItem => ({
  id: track.id,
  name: track.payload?.name ?? '',
  color: track.payload?.color ?? '',
  order: track.order,
  category: track.payload?.category ?? '',
})

const mapEvent = (event: LayoutEvent<Arc2025EventPayload>): UIColumnItem => ({
  id: event.event.id,
  header: {
    title: event.event.payload?.title ?? '',
    subTitle: event.event.payload?.subTitle ?? '',
  },
  body: {
    duration: event.event.payload?.duration,
    time: {
      start: event.event.time.start,
      end: event.event.time.end,
    },
  },
  footer: {
    infoButton:
      event.event.payload?.description || event.event.payload?.galleryUrl
        ? 'MÃ¡s Info'
        : undefined,
  },
  labels: {
    left: event.event.payload?.category ?? '',
  },
})

const gridProps = adaptScheduleDataToGrid(
  arc2025Day1ScheduleData,
  mapTrack,
  mapEvent,
)
---

<ScheduleGrid client:idle {...gridProps} />
