---
import { ScheduleGrid, adaptScheduleDataToGrid } from '@/features/schedule'
import {
  arc2025Day1ScheduleData,
  arc2025Day2ScheduleData,
} from '@/features/arc2025/data'
import type { ScheduleTrack } from '@/features/schedule'
import type { LayoutEvent } from '@/features/schedule'
import type {
  Arc2025StagePayload,
  Arc2025EventPayload,
} from '@/features/arc2025/types'
import type {
  UIHeaderItem,
  UIColumnItem,
  ScheduleDay,
} from '@/features/schedule'
import Title from '../ui/Title.astro'

const mapTrack = (track: ScheduleTrack<Arc2025StagePayload>): UIHeaderItem => ({
  id: track.id,
  name: track.payload?.name ?? '',
  color: track.payload?.color ?? '',
  order: track.order,
  category: track.payload?.category ?? '',
})

const mapEvent = (event: LayoutEvent<Arc2025EventPayload>): UIColumnItem => ({
  id: event.event.id,
  header: {
    title: event.event.payload?.title ?? '',
    subTitle: event.event.payload?.subTitle ?? '',
  },
  body: {
    duration: event.event.payload?.duration,
    time: {
      start: event.event.time.start,
      end: event.event.time.end,
    },
  },
  footer: {
    // TODO: add more info when add modal component to schedule ui
    // infoButton:
    //   event.event.payload?.description || event.event.payload?.galleryUrl
    //     ? 'M치s Info'
    //     : undefined,
  },
  labels: {
    left: event.event.payload?.category ?? '',
  },
})

const scheduleDays: ScheduleDay[] = [
  {
    label: 'S치bado 18',
    data: adaptScheduleDataToGrid(arc2025Day1ScheduleData, mapTrack, mapEvent),
  },
  {
    label: 'Domingo 19',
    data: adaptScheduleDataToGrid(arc2025Day2ScheduleData, mapTrack, mapEvent),
  },
]
---

<section class=''>
  <Title subTitle='S치bado 18 y Domingo 19'>Programaci칩n</Title>
  <ScheduleGrid client:idle days={scheduleDays} />
</section>
